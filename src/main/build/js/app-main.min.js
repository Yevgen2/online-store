"use strict";var _this=void 0,initLocalStorage=function(){localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify([])),changeCountOfCardIcon()},changeCountOfCardIcon=function t(a){var c,o;0===a?$(".nav-shop__circle").text(""):a?$(".nav-shop__circle").text(a):(c=JSON.parse(localStorage.getItem("cart")),0<(o=calculateCountOfAllProductsInCart(c))&&t(o))},addProductToCart=function(t){var a=t.currentTarget.dataset.id,c=JSON.parse(localStorage.getItem("cart")),o=!1;c.forEach(function(t){t.productId===a&&(t.count++,o=!0)}),o||c.push({productId:a,count:1});var n=calculateCountOfAllProductsInCart(c);changeCountOfCardIcon(n),localStorage.setItem("cart",JSON.stringify(c))},calculateCountOfAllProductsInCart=function(t){var a=0;return t.forEach(function(t){a+=t.count}),a},cartListener=function(){$(".ti-shopping-cart").click(showModalCart)},showModalCart=function(t){var a=$("#overlay"),c=$(".modal_close, #overlay"),o=$(".modal_div");t.preventDefault(),a.fadeIn(400,function(){$(o).css("display","block").animate({opacity:1,top:"50%"},200)}),fillCart(),c.click(function(){o.animate({opacity:0,top:"45%"},200,function(){$(_this).css("display","none"),a.fadeOut(400)})})},fillCart=function(){var n=JSON.parse(localStorage.getItem("cart"));$("#modal-cart-block").text(""),fetch(productsUrl).then(function(t){return t.json()}).then(function(t){var c=!0,o=1;t.forEach(function(a){n.forEach(function(t){a.id===t.productId&&(c=!1,createBlockWithProductInCart(a,t.count,o++))})}),c?$("<div/>",{text:"Cart is empty"}).appendTo($("#modal-cart-block")):$("<button/>",{type:"button",text:"place an order",id:"place-an-order-btn"}).click(placeAnOrder).appendTo($("#modal-cart-block"))})},createBlockWithProductInCart=function(t,a,c){var o=t.id,n=t.brand,r=t.model,e=t.price,d=t.img,i=$("<div/>",{"data-id":o,"data-count":a,id:"product-block-".concat(c)}).addClass("product-in-cart-card").appendTo($("#modal-cart-block"));$('<img src="'.concat(d,'">')).addClass("img-in-cart").appendTo(i),$("<div>",{text:"".concat(n," ").concat(r," ")}).appendTo(i),$("<div>",{text:"Count x ".concat(a),id:"product-block-count-".concat(c),"data-count":a}).appendTo(i),$("<div>",{text:"Price is ".concat(e*a),id:"product-block-price-".concat(c),"data-price":e}).appendTo(i),$("<button/>",{type:"button",text:"-"}).click(removeOneProductFromCart).appendTo(i),$("<button/>",{type:"button",text:"+"}).click(addOneProductToCart).appendTo(i)},removeOneProductFromCart=function(t){var a=t.target.parentElement.getAttribute("id"),c=a.match(/\d/),o=$("#".concat(a)),n=t.target.parentElement.dataset.id,r=$("#modal-cart-block"),e="#product-block-price-".concat(c[0]),d=parseInt($(e).attr("data-price")),i="#product-block-count-".concat(c[0]),u=parseInt($(i).attr("data-count")),l=JSON.parse(localStorage.getItem("cart")),p=[];1===u?(o.remove(),l.find(function(t){t.productId!==n&&1<l.length?(p.push(t),localStorage.setItem("cart",JSON.stringify(p))):t.productId===n&&(localStorage.setItem("cart",JSON.stringify(p)),r.children().length<2&&($("#place-an-order-btn").remove(),$("<div/>",{text:"Cart is empty"}).appendTo(r),changeCountOfCardIcon(0)))})):l.find(function(t){t.productId===n&&(t.count=--u,o.attr("data-count",u),$(i).attr("data-count",u),$(i).text("Count x ".concat(u)),$(e).text("Price is ".concat(d*u)),localStorage.setItem("cart",JSON.stringify(l)))}),changeCountOfCardIcon()},addOneProductToCart=function(t){var a=t.target.parentElement.getAttribute("id"),c=a.match(/\d/),o=$("#".concat(a)),n=t.target.parentElement.dataset.id,r="#product-block-price-".concat(c[0]),e=parseInt($(r).attr("data-price")),d="#product-block-count-".concat(c[0]),i=parseInt($(d).attr("data-count")),u=JSON.parse(localStorage.getItem("cart"));u.find(function(t){t.productId===n&&(t.count=++i)}),o.attr("data-count",i),$(d).attr("data-count",i),$(d).text("Count x ".concat(i)),$(r).text("Price is ".concat(e*i)),localStorage.setItem("cart",JSON.stringify(u)),changeCountOfCardIcon()},placeAnOrder=function(){};;"use strict";var categoriesStartListener=function(){$("#category-btn").click(createCategories),$(".button-hero").click(createCategories)},createCategories=function(e){e.preventDefault(),$(".hero-banner").removeClass("active"),$(".category-page").addClass("active"),document.querySelector(".category-list").append($("<div/>").addClass("container")),fetch(categoriesUrl).then(function(e){return e.json()}).then(function(e){createBlockOfCategories(e)}).catch(function(e){console.log("Ups"),console.log(e)})},createBlockOfCategories=function(e){e.forEach(function(e){var t=document.querySelector(".category-list .row"),c=(e.id,e.name),a=e.description,r=e.img,n=document.createElement("div");n.classList.add("card","card-product","col-md-6","col-lg-4");var o=document.createElement("img");o.setAttribute("src",r);var d=document.createElement("div");d.classList.add("card-body","text-center");var i=document.createElement("h4");i.textContent=c;var s=document.createElement("p");s.className="card-product__price",s.textContent=a,n.appendChild(o),d.appendChild(i),d.appendChild(s),n.appendChild(d),n.addEventListener("click",showProductsByCategory),t.appendChild(n)})};;"use strict";var filterForm=document.forms.filterForm,productsUrl1=[{id:"1",categoryId:"1",brand:"Apple",model:"Iphone XR",price:3e4,img:"images/smart-phones/iphonexr.jpg"},{id:"2",categoryId:"1",brand:"Samsung",model:"Galaxy x10",price:2e4,img:"images/smart-phones/galaxy10.jpg"},{id:"3",categoryId:"2",brand:"Apple",model:"Mac Book Air",price:35e3,img:"images/laptops/macbookair.jpg"},{id:"4",categoryId:"2",brand:"Dell",model:"G3 15",price:26e3,img:"images/laptops/dellg315.jpg"},{id:"5",categoryId:"3",brand:"Ford",model:"Mustang",price:3e5,img:"images/auto/ford-mustang.jpg"},{id:"6",categoryId:"3",brand:"Yamaha",model:"R1",price:2e5,img:"images/auto/r1.jpg"},{id:"7",categoryId:"4",brand:"Lev Tolstoy",model:"War and Peace",price:137,img:"images/books/war.jpg"},{id:"8",categoryId:"4",brand:"Jack London",model:"White fang",price:150,img:"images/books/white-fang.jpg"},{id:"9",categoryId:"5",brand:"Lego",model:"City",price:500,img:"images/toys/lego-city.jpg"},{id:"10",categoryId:"5",brand:"Nikelodeon",model:"Sponge Bob",price:700,img:"images/toys/sponge-bob.jpg"}],productsCategoryIdSelect=productsUrl1.reduce(function(e,t){return e.add(t.categoryId)},new Set),productsBrandSelect=productsUrl1.reduce(function(e,t){return e.add(t.brand)},new Set),productsModelSelect=productsUrl1.reduce(function(e,t){return e.add(t.model)},new Set),productsPriceSelect=productsUrl1.reduce(function(e,t){return e.add(t.price)},new Set);function filterFormCreate1(){productsCategoryIdSelect.forEach(function(e){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("name","price"),t.setAttribute("value",e);var r=document.createElement("span");r.innerHTML=e+": ";var a=document.createElement("br");filterForm.appendChild(r),filterForm.appendChild(t),filterForm.appendChild(a)}),productsBrandSelect.forEach(function(e){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("name","price"),t.setAttribute("value",e);var r=document.createElement("span");r.innerHTML=e+": ";var a=document.createElement("br");filterForm.appendChild(r),filterForm.appendChild(t),filterForm.appendChild(a)}),productsModelSelect.forEach(function(e){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("name","price"),t.setAttribute("value",e);var r=document.createElement("span");r.innerHTML=e+": ";var a=document.createElement("br");filterForm.appendChild(r),filterForm.appendChild(t),filterForm.appendChild(a)}),productsPriceSelect.forEach(function(e){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("name","price"),t.setAttribute("value",e);var r=document.createElement("span");r.innerHTML=e+": ";var a=document.createElement("br");filterForm.appendChild(r),filterForm.appendChild(t),filterForm.appendChild(a)})};"use strict";var categoriesUrl="../../categories.json",productsUrl="../../products.json";;"use strict";var productsStartListener=function(){$("#products-btn").click(createProducts)},createProducts=function(t){t.preventDefault(),$(".hero-banner").remove(),$("#categories-block").remove(),$("#products-block").remove(),$("<div/>",{id:"products-block"}).prependTo($(".site-main")).append($("<div/>").addClass("container")),fetch(productsUrl).then(function(t){return t.json()}).then(function(t){createBlockOfProducts(t)}).catch(function(t){console.log("Ups"),console.log(t)})},createBlockOfProducts=function(t){t.forEach(function(t){var o=t.id,c=t.categoryId,e=t.brand,n=t.model,r=t.price,d=t.img;$("<div/>",{"data-id":o,"category-id":c}).addClass("product-card").appendTo($("#products-block > .container")).append($("<img>",{src:d})).append($("<div/>",{text:e})).append($("<div/>",{text:n})).append($("<div/>",{text:"Price is: ".concat(r)})).append($("<button/>",{type:"button",text:"Add to cart","data-id":o}).click(addProductToCart))})},showProductsByCategory=function(t){var c=t.currentTarget.dataset.id;$("#categories-block").remove(),$("<div/>",{id:"products-block"}).prependTo($(".site-main")).append($("<div/>").addClass("container")),fetch(productsUrl).then(function(t){return t.json()}).then(function(t){var o=[];t.find(function(t){t.categoryId===c&&o.push(t)}),createBlockOfProducts(o)}).catch(function(t){console.log("Ups"),console.log(t)})};;"use strict";categoriesStartListener(),productsStartListener(),filterFormCreate1(),initLocalStorage(),cartListener();