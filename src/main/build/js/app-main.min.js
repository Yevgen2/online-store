"use strict";var initLocalStorage=function(){localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify([])),changeCountOfCardIcon()},changeCountOfCardIcon=function t(a){var c,e;0===a?$(".nav-shop__circle").text(""):a?$(".nav-shop__circle").text(a):(c=JSON.parse(localStorage.getItem("cart")),0<(e=calculateCountOfAllProductsInCart(c))&&t(e))},addProductToCart=function(t){var a=t.currentTarget.dataset.id,c=JSON.parse(localStorage.getItem("cart")),e=!1;c.forEach(function(t){t.productId===a&&(t.count++,e=!0)}),e||c.push({productId:a,count:1});var n=calculateCountOfAllProductsInCart(c);changeCountOfCardIcon(n),localStorage.setItem("cart",JSON.stringify(c))},calculateCountOfAllProductsInCart=function(t){var a=0;return t.forEach(function(t){a+=t.count}),a},cartListener=function(){$(".ti-shopping-cart").click(showModalCart)},showModalCart=function(t){$("section").removeClass("active"),$(".cart_area").addClass("active"),t.preventDefault(),fillCart()},fillCart=function(){var e=JSON.parse(localStorage.getItem("cart"));fetch(productsUrl).then(function(t){return t.json()}).then(function(t){var c=1;t.forEach(function(a){e.forEach(function(t){a.id===t.productId&&createBlockWithProductInCart(a,t.count,c++)})})})},createBlockWithProductInCart=function(t,a){var c=t.id,e=t.brand,n=(t.model,t.price),o=t.img,r=$("<tr/>",{"data-id":c,"data-count":a}),d=$("<td/>").appendTo(r);$(d).append($("<div/>").addClass("media").append($("<div/>").addClass("d-flex")).append($('<img src="'.concat(o,'">')).height(150).width(150)).append($("<div/>").addClass("media-body").append($("<p/>",{text:e})))),$("<td/>").appendTo(r).append($("<h5/>",{text:"$ ".concat(n)})),$("<td/>").appendTo(r).append($("<div/>").addClass("product_count").append($("<div/>",{"data-count":a,text:a}).css("margin-top","5px")).append($("<button/>",{type:"button",text:"-"}).addClass("product_count").click(removeOneProductFromCart)).append($("<button/>",{type:"button",text:"+"}).addClass("product_count").click(addOneProductToCart))),$("<td/>").appendTo(r).append($("<h5/>",{text:"$ ".concat(n*a)})),$(".table > tbody").prepend(r)},removeOneProductFromCart=function(t){var a=t.target.parentElement.getAttribute("id"),c=a.match(/\d/),e=$("#".concat(a)),n=t.target.parentElement.dataset.id,o=$("#modal-cart-block"),r="#product-block-price-".concat(c[0]),d=parseInt($(r).attr("data-price")),u="#product-block-count-".concat(c[0]),i=parseInt($(u).attr("data-count")),p=JSON.parse(localStorage.getItem("cart")),l=[];1===i?(e.remove(),p.find(function(t){t.productId!==n&&1<p.length?(l.push(t),localStorage.setItem("cart",JSON.stringify(l))):t.productId===n&&(localStorage.setItem("cart",JSON.stringify(l)),o.children().length<2&&($("#place-an-order-btn").remove(),$("<div/>",{text:"Cart is empty"}).appendTo(o),changeCountOfCardIcon(0)))})):p.find(function(t){t.productId===n&&(t.count=--i,e.attr("data-count",i),$(u).attr("data-count",i),$(u).text("Count x ".concat(i)),$(r).text("Price is ".concat(d*i)),localStorage.setItem("cart",JSON.stringify(p)))}),changeCountOfCardIcon()},addOneProductToCart=function(t){var a=t.target.parentElement.getAttribute("id"),c=a.match(/\d/),e=$("#".concat(a)),n=t.target.parentElement.dataset.id,o="#product-block-price-".concat(c[0]),r=parseInt($(o).attr("data-price")),d="#product-block-count-".concat(c[0]),u=parseInt($(d).attr("data-count")),i=JSON.parse(localStorage.getItem("cart"));i.find(function(t){t.productId===n&&(t.count=++u)}),e.attr("data-count",u),$(d).attr("data-count",u),$(d).text("Count x ".concat(u)),$(o).text("Price is ".concat(r*u)),localStorage.setItem("cart",JSON.stringify(i)),changeCountOfCardIcon()},placeAnOrder=function(){};;"use strict";var categoriesStartListener=function(){$("#category-btn").click(createCategories),$(".button-hero").click(createCategories)},createCategories=function(e){e.preventDefault(),$(".hero-banner").removeClass("active"),$(".category-page").addClass("active"),document.querySelector(".category-list").append($("<div/>").addClass("container")),fetch(categoriesUrl).then(function(e){return e.json()}).then(function(e){createBlockOfCategories(e)}).catch(function(e){console.log("Ups"),console.log(e)})},createBlockOfCategories=function(e){e.forEach(function(e){var t=document.querySelector(".category-list .row"),c=(e.id,e.name),a=e.description,r=e.img,n=document.createElement("div");n.classList.add("card","card-product","col-md-6","col-lg-4");var o=document.createElement("img");o.setAttribute("src",r);var d=document.createElement("div");d.classList.add("card-body","text-center");var i=document.createElement("h4");i.textContent=c;var s=document.createElement("p");s.className="card-product__price",s.textContent=a,n.appendChild(o),d.appendChild(i),d.appendChild(s),n.appendChild(d),n.addEventListener("click",showProductsByCategory),t.appendChild(n)})};;"use strict";var filterForm=document.forms.filterForm,productsUrl1=[{id:"1",categoryId:"1",brand:"Apple",model:"Iphone XR",price:3e4,img:"images/smart-phones/iphonexr.jpg"},{id:"2",categoryId:"1",brand:"Samsung",model:"Galaxy x10",price:2e4,img:"images/smart-phones/galaxy10.jpg"},{id:"3",categoryId:"2",brand:"Apple",model:"Mac Book Air",price:35e3,img:"images/laptops/macbookair.jpg"},{id:"4",categoryId:"2",brand:"Dell",model:"G3 15",price:26e3,img:"images/laptops/dellg315.jpg"},{id:"5",categoryId:"3",brand:"Ford",model:"Mustang",price:3e5,img:"images/auto/ford-mustang.jpg"},{id:"6",categoryId:"3",brand:"Yamaha",model:"R1",price:2e5,img:"images/auto/r1.jpg"},{id:"7",categoryId:"4",brand:"Lev Tolstoy",model:"War and Peace",price:137,img:"images/books/war.jpg"},{id:"8",categoryId:"4",brand:"Jack London",model:"White fang",price:150,img:"images/books/white-fang.jpg"},{id:"9",categoryId:"5",brand:"Lego",model:"City",price:500,img:"images/toys/lego-city.jpg"},{id:"10",categoryId:"5",brand:"Nikelodeon",model:"Sponge Bob",price:700,img:"images/toys/sponge-bob.jpg"}],productsCategoryIdSelect=productsUrl1.reduce(function(e,t){return e.add(t.categoryId)},new Set),productsBrandSelect=productsUrl1.reduce(function(e,t){return e.add(t.brand)},new Set),productsModelSelect=productsUrl1.reduce(function(e,t){return e.add(t.model)},new Set),productsPriceSelect=productsUrl1.reduce(function(e,t){return e.add(t.price)},new Set);function filterFormCreate1(){productsCategoryIdSelect.forEach(function(e){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("name","price"),t.setAttribute("value",e);var r=document.createElement("span");r.innerHTML=e+": ";var a=document.createElement("br");filterForm.appendChild(r),filterForm.appendChild(t),filterForm.appendChild(a)}),productsBrandSelect.forEach(function(e){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("name","price"),t.setAttribute("value",e);var r=document.createElement("span");r.innerHTML=e+": ";var a=document.createElement("br");filterForm.appendChild(r),filterForm.appendChild(t),filterForm.appendChild(a)}),productsModelSelect.forEach(function(e){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("name","price"),t.setAttribute("value",e);var r=document.createElement("span");r.innerHTML=e+": ";var a=document.createElement("br");filterForm.appendChild(r),filterForm.appendChild(t),filterForm.appendChild(a)}),productsPriceSelect.forEach(function(e){var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("name","price"),t.setAttribute("value",e);var r=document.createElement("span");r.innerHTML=e+": ";var a=document.createElement("br");filterForm.appendChild(r),filterForm.appendChild(t),filterForm.appendChild(a)})};"use strict";var categoriesUrl="../../categories.json",productsUrl="../../products.json";;"use strict";var productsStartListener=function(){$("#products-btn").click(createProducts)},createProducts=function(t){t.preventDefault(),$(".hero-banner").remove(),$("#categories-block").remove(),$("#products-block").remove(),$("<div/>",{id:"products-block"}).prependTo($(".site-main")).append($("<div/>").addClass("container")),fetch(productsUrl).then(function(t){return t.json()}).then(function(t){createBlockOfProducts(t)}).catch(function(t){console.log("Ups"),console.log(t)})},createBlockOfProducts=function(t){t.forEach(function(t){var o=t.id,c=t.categoryId,e=t.brand,n=t.model,r=t.price,d=t.img;$("<div/>",{"data-id":o,"category-id":c}).addClass("product-card").appendTo($("#products-block > .container")).append($("<img>",{src:d})).append($("<div/>",{text:e})).append($("<div/>",{text:n})).append($("<div/>",{text:"Price is: ".concat(r)})).append($("<button/>",{type:"button",text:"Add to cart","data-id":o}).click(addProductToCart))})},showProductsByCategory=function(t){var c=t.currentTarget.dataset.id;$("#categories-block").remove(),$("<div/>",{id:"products-block"}).prependTo($(".site-main")).append($("<div/>").addClass("container")),fetch(productsUrl).then(function(t){return t.json()}).then(function(t){var o=[];t.find(function(t){t.categoryId===c&&o.push(t)}),createBlockOfProducts(o)}).catch(function(t){console.log("Ups"),console.log(t)})};;"use strict";categoriesStartListener(),productsStartListener(),filterFormCreate1(),initLocalStorage(),cartListener();